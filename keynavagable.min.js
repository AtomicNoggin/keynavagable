!function(e){var r=new WeakMap,u=new WeakMap,i=new WeakMap,l={},a="next",o="aria-flowto",c="prev",f="x-ms-aria-flowfrom";e.KeyNavigable={getTabNext:function(e){var t=i.get(e);return t&&t[a]?t[a]:document.getElementById(this.getAttribute(o))},setTabNext:function(e,t){var n=i.get(e)||{};return t instanceof Element||t instanceof Function?(n[a]=t,e.removeAttribute(o),t instanceof Element&&t.id&&e.setAttribute(o,t.id)):t===String(t)&&t.length?(n[a]=null,e.setAttribute(o,t)):(n[a]=null,e.removeAttribute(o)),i.set(e,n),window.KeyNavigable},getTabPrevious:function(e){var t=i.get(e);if(t&&t[c])return t[c];var n=elmementId.getAttribute(f);return n?document.getElementById(n):e.id?document.querySelector("["+o+'="'+e.id+'"]'):null},setTabPrevious:function(e,t){var n=i.get(e)||{};return t instanceof Element||t instanceof Function?(n[c]=t,e.removeAttribute(f),t instanceof Element&&t.id&&e.setAttribute(f,t.id)):t===String(t)&&t.length?(n[c]=null,e.setAttribute(f,t)):(n[c]=null,e.removeAttribute(f)),i.set(e,n),window.KeyNavigable},hasKeyAction:function(e,t){return!!(r.get(e)||{})[t]},getKeyAction:function(e,t){return(r.get(e)||{})[t]},setKeyAction:function(e,t,n,i){var a=r.get(e)||{};return i=i instanceof Element?i:e,n&&n===""+n&&i[n]instanceof Function?n=e[n]:n instanceof Function||(n=function(){console.lig(t+" KeyAction fired for "+e)}),a[t]=n.bind(i),r.set(e,a),window.KeyNavigable},removeKeyAction:function(e,t){var n=r.get(e);return n&&n[t]&&(delete n[t],Object.keys(n).length?r.set(e,n):r.delete(e)),window.KeyNavigable},hasCaptureKeyAction:function(e,t){return!!(u.get(e)||{})[t]},getCaptureKeyAction:function(e,t){return(u.get(e)||{})[t]},captureKeyAction:function(e,t,n,i){var a=u.get(e)||{};return a[t]||(l[t]?l[t]++:l[t]=1),i=i instanceof Element?i:e,n&&n===""+n&&e[n]instanceof Function?n=e[n]:n instanceof Function||(n=function(){console.log(t+" KeyCapture fired for "+e)}),a[t]=n.bind(e),u.set(e,a),window.KeyNavigable},releaseKeyAction:function(e,t){var n=u.get(e);return n&&n[t]&&(delete n[t],l[t]--,Object.keys(n).length?u.set(e,n):u.delete(e)),window.KeyNavigable}},e.document&&document.addEventListener("keydown",function(t){var e=" "!==t.key?t.key:"Space",n=document.activeElement,i=r.get(n),a=n;if(!n.isContentEditable)if(e=(t.altKey&&"Alt"!==e?"Alt ":"")+(t.ctrlKey&&"Control"!==e?"Control ":"")+(t.keyMeta&&"Meta"!==e?"Meta ":"")+(t.shiftKey&&1<e.length&&"Shift"!==e?"Shift ":"")+e,i&&i[e])n.dispatchEvent(o())&&(t.preventDefault(),i[e]());else if("Tab"==e&&(n=KeyNaviagable.getTabNext(n)))"function"==typeof n&&(n=n()),n instanceof Element&&(n.focus(),t.preventDefault());else if("Shift Tab"==e&&(n=KeyNaviagable.getTabPrevious(n)))"function"==typeof n&&(n=n()),n instanceof Element&&(n.focus(),t.preventDefault());else if(l[e]){if(!(i=u.get(a))||!i[e])for(;a=a.parentElement,i=u.get(a),a&&(!i||!i[e]););a&&a.dispatchEvent(o(a))&&(t.preventDefault(),i[e]())}function o(e){return new CustomEvent("keynavigation",{cancelable:!0,bubbles:!0,details:{key:t.key,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,relatedTarget:e||n}})}},!0)}(self);

!function(){var t=new WeakMap,e=new WeakMap,n=new WeakMap,i={},s=Element.prototype,r="tab-previous";Object.defineProperties(s,{tabNext:{get:function(){var t=n.get(this);return t&&t.next?t.next:document.getElementById(this.getAttribute("tab-next"))},set:function(t){var e=n.get(this)||{};t instanceof Element?(e.next=t,this.removeAttribute("tab-next")):t===String(t)&&t.length?(e.next=null,this.setAttribute("tab-next",t)):(e.next=null,this.removeAttribute("tab-next")),n.set(this,e)},enumerable:!0,configurable:!0},tabPrevious:{get:function(){var t=n.get(this);return t&&t.prev?t.prev:document.getElementById(this.getAttribute(r))},set:function(t){var e=n.get(this)||{};t instanceof Element?(e.prev=t,this.removeAttribute(r)):t===String(t)&&t.length?(e.prev=null,this.setAttribute(r,t)):(e.prev=null,this.removeAttribute(r)),n.set(this,e)},enumerable:!0,configurable:!0}}),s.hasKeyAction=function(e){return!!(t.get(this)||{})[e]},s.getKeyAction=function(e){return(t.get(this)||{})[e]},s.setKeyAction=function(e,n,i){var s=t.get(this)||{};i=i instanceof Element?i:this,n&&n===""+n&&i[n]instanceof Function?n=i[n]:"function"!=typeof n&&(n=function(){}),n&&(s[e]=n.bind(i),t.set(this,s))},s.removeKeyAction=function(e){var n=t.get(this);n&&n[e]&&(delete n[e],Object.keys(n).length?t.set(this,n):t.delete(this))},s.hasCaptureKeyAction=function(t){return!!(e.get(this)||{})[t]},s.getCaptureKeyAction=function(t){return(e.get(this)||{})[t]},s.captureKeyAction=function(t,n,s){var r=e.get(this)||{};r[t]||(i[t]?i[t]++:i[t]=1),s=s instanceof Element?s:this,n&&n===""+n&&s[n]instanceof Function?n=s[n]:n instanceof Function||(n=function(){}),r[t]=n.bind(s),e.set(this,r)},s.releaseKeyAction=function(t){var n=e.get(this);n&&n[this]&&(delete n[this],i[t]--,Object.keys(n).length?e.set(this,n):e.delete(this))},document.addEventListener("keydown",function(n){var s=" "!==n.key?n.key:"Space",r=document.activeElement,a=t.get(r),o=r;if(!r.isContentEditable)if(s=(n.altKey&&"Alt"!==s?"Alt ":"")+(n.ctrlKey&&"Control"!==s?"Control ":"")+(n.keyMeta&&"Meta"!==s?"Meta ":"")+(n.shiftKey&&s.length>1&&"Shift"!==s?"Shift ":"")+s,a&&a[s])r.dispatchEvent(u())&&(n.preventDefault(),a[s]());else if("Tab"==s&&(r=r.tabNext))r.focus(),n.preventDefault();else if("Shift Tab"==s&&(r=r.tabPrevious))r.focus(),n.preventDefault();else if(i[s]){if(!(a=e.get(o))||!a[s])do{o=o.parentElement,a=e.get(o)}while(o&&(!a||!a[s]));o&&o.dispatchEvent(u())&&(n.preventDefault(),a[s]())}function u(){return new CustomEvent("keynavigation",{cancelable:!0,bubbles:!0,details:{key:n.key,altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey,relatedTarget:r}})}},!0)}();
